= Railroad Editor ユーザーマニュアル
// DocTypeを指定
:page-layout: docs
// ドキュメントの説明。
:description: 本ガイドはRailroad Editorのユーザーマニュアルです。
// 検索キーワード
:keywords: AsciiDoc, Asciidoctor, syntax, reference, cheatsheet, 日本語訳, 翻訳, 訳
// 言語を指定
:lang: ja
// font awsomeを使用する。
:icons: font
:docinfo:
// 目次を表示する。左側に表示する。
:toc: left
// 第何レベルまで目次を表示するか。
:toclevels: 2
// タイトルにリンクをつける
:linkattrs:
// 章番号を付けるか。属性を定義しておくだけで章番号が付けられる。
:sectnums:
// ソースコードをハイライトする。
:source-highlighter: coderay
// UIマクロを有効にする
:experimental:
// 変数定義。各資産のルートフォルダ
// 画像
:imagesdir: images
// インクルード用adocファイル
:includedir: _includes
// ソース(Javaソースなど)
:sourcedir: sources
// 各ラベルの日本語定義
:toc-title: 目次
:preface-title: はじめに
:appendix-caption: 付録
:caution-caption: 注意
:example-caption: 例
:figure-caption: 図
:important-caption: 重要
:last-update-label: 最終更新
:manname-title: 名前
:note-caption: 注記
:preface-title: まえがき
:table-caption: 表
:tip-caption: ヒント
:toc-title: 目次
:untitled-label: 無題
:version-label: バージョン
:warning-caption: 警告
:listing-caption:
// デフォルトの章番号の接頭辞「Chapter.」が表示されないよう、値を空で設定する。
:sectanchors:


Railroad Editor は、Webブラウザ上で動作する鉄道模型レイアウトデザインアプリです。

toc::[]


== 画面説明
image::screen.png[]

各部の名称は以下の通りです。

. メニュー
. レイアウトタイトル
. オブジェクトツール
. レール配置モード
. 編集コマンド
. レールパレット
. レイアウト領域
. レイヤーパレット

=== メニュー
レイアウトの新規作成、保存、ロードに関するメニューです。

NOTE: レイアウトの保存機能を利用するには、Sign up からユーザー登録を行ってください。

[cols="2*", options="header"]
|===
|メニューアイテム
|説明

|Sign Up
|メールアドレスとパスワードによりユーザー登録を行います。  +
OKを押すと確認のメールが送信されるので、メールに記載されたリンクを開いてユーザー登録を完了します。

|Login
|メールアドレスとパスワードによりログインを行います。

|My Layouts
|クラウドストレージに保存したレイアウトの一覧を表示します。  +
レイアウトをロードするには、対象のレイアウトをクリックします。

|New Layouts
|編集中のレイアウトに対する変更を破棄し、新しいレイアウトを作成します。

|Save
|編集中のレイアウトをクラウドストレージに保存します。

|Save As ...
|編集中のレイアウトを別名でクラウドストレージに保存します。

|===


=== レイアウトタイトル
編集中のレイアウトのタイトルです。クリックすると、タイトルを変更することができます。

=== オブジェクトツール
配置するオブジェクトはオブジェクトツールから選択します。下記のツールが利用できます。

[cols="2*", options="header"]
|===
|ツール名
|説明

|ストレートレール
|ストレートレールを配置します。

|カーブレール
|カーブレールを配置します。

|ポイントレール
|ポイントレールを配置します。

|その他のレール
|その他のレールを配置します。

|レールグループ
|レールグループ（複数のレールをまとめたもの）を配置します。

|フィーダー
|フィーダーを配置します。

|ギャップジョイナー
|ギャップジョイナーを配置します。

|ハンドツール
|レイアウトのパンニングを行うツール

|===

NOTE: レールグループとは、複数のレールをまとめて一つのレールとみなして扱う概念です。
レールグループを活用することで、頻繁に利用するレールパターンを再利用したり、切り取って移動することができます。

=== レール配置モード
レールを配置する際のモードを切り替えます。

[cols="2*", options="header"]
|===
|モード名
|説明

|自由配置モード
|クリックした場所にレールを配置します。

|ジョイント接続モード
|接続先のレールのジョイントに接続する形でレールを配置します。

|===

=== 編集コマンド

[cols="2*", options="header"]
|===
|コマンド名
|説明

|コピー
|現在選択しているレールをクリップボードにコピーします。

|切り取り
|現在選択しているレールをクリップボードにコピーし、削除します。

|削除
|現在選択しているレールを削除します。

|アンドゥ
|直前のレイアウトへの変更を取り消します。

|リドゥ
|直前のアンドゥを取り消します。

|ビューをリセット
|ビューを初期状態にリセットします。

|設定
|レイアウトの設定を変更します。

|===


=== レールパレット
オブジェクトツールでレール系ツールを選択している場合に表示されます。
配置するレールは、このパレットのリストの中から選択します。

=== レイアウト領域
編集可能なレイアウトの領域です。領域のサイズは設定から変更できます。

=== レイヤーパレット
レイアウトのレイヤーを管理するパレットです。下記の操作が可能です。

* レイヤーの追加・削除
* レイヤーの可視性の変更
* アクティブレイヤー（編集中のレイヤー）の切替
* レイヤーの設定の変更

== 基本的な使い方

=== レールの配置
レールの配置は、下記の手順で行います。

. オブジェクトツールから、レール系ツールを選択します。
. レールパレットから、配置するレールを選択します。
. レール配置モードを選択します。レール配置モードは下記の２種類です。
** 自由配置モード
** ジョイント接続モード
. 各配置モードごとの手順にもとづいてレールを配置します。

以下、各配置モードごとの手順について説明します。

==== 自由配置モード
レイアウト上のクリックした場所にレールを配置するモードです。

. レイアウト上の配置したい場所を左クリックします。
** Shiftを押し続けると、グリッド上に配置することができます。
. クリックした場所に対して、レールのジョイントを合わせる形で半透明の仮レールが表示されます。
. 右クリックで、合わせるレールのジョイントを切り替えることができます。
** ジョイント1 -> 2 -> 3 ...  -> レールの中心点 -> ジョイント1, とループします。
. マウスを移動させると、マウスの方向にレールを回転させることができます。
. 再度左クリックすることで、レールの配置を確定します。

レイアウト上にレールが一本も無い状態では、自由配置モードのみ選択できます。

==== ジョイント接続モード
接続先のレールのジョイントをクリックすることでレールを配置するモードです。

. 接続先のレールのジョイントに、マウスカーソルを合わせます。
. ジョイントに接続された半透明の仮レールが表示されます。
. 右クリックで、接続するレールのジョイントを切り替えることができます。
** ジョイント1 -> 2 -> 3 ...  -> レールの中心点 -> ジョイント1, とループします。
. 左クリックすることで、レールの配置を確定します。

WARNING: 他のレールと重なっている場合、レールを配置することはできません。立体交差のあるレイアウトを作成する場合、後述のレイヤー機能を利用してください。

一本目のレールを配置した後は、大半はこのジョイント接続モードを使うことになるでしょう。
そのため、レイアウト上に一本目のレールを配置した後は、自動的にこのジョイント接続モードに切り替わります。
もちろん、いつでも自由配置モードに切り替えることが可能です。


=== レールの編集

==== レールの選択
レールを選択することで、コピー・切り取り・削除などの編集コマンドを実行することができます。
レールを選択するには以下の方法があります。

* クリックによる選択
* ドラッグによる矩形範囲選択

===== クリックによる選択
* レールをクリックすると、そのレールを選択状態にします。
* 他のレールを選択するか、何もない場所をクリックすると選択状態は解除されます。
* Shiftを押しながらレールを選択すると、選択状態は解除されないため、複数のレールを選択することができます。

===== ドラッグによる矩形選択
* 矩形選択の始点をクリックします。
* そのまま右下方向にドラッグすると、黄色の矩形が表示されます。
* 矩形範囲に一部または全体が含まれる全てのレールが選択されます。

==== レールの削除
レールの削除を行う手順は以下の通りです。

. 1つ以上のレールを選択状態にします。
. 削除コマンドをクリックするか、Deleteキーを入力します。

==== レールのコピー・切り取り
レールのコピー・切り取りを実行する手順は以下の通りです。

. 1個以上のレールを選択状態にします。
. コピーまたは切り取り編集コマンドを実行します。
. 選択したレール群が「クリップボード」という名前のレールグループとして登録されます。  +
切り取りの場合、同時に削除が実行されます。
. 自動的にレールグループツールに切り替わり、クリップボードレールグループを選択した状態になります。
. クリップボードレールグループを好きな場所に配置します。

クリップボードレールグループは、再度コピー・切り取りを行うまで同じ内容が保持されます。


=== レイアウトビューの操作

* マウスホイール操作でレイアウトの拡大・縮小ができます。
* パンニングを行うには、オブジェクトツールからパンニングツールを選択します。
** マウスをドラッグすることで、パンニングができます。
** Altキーを押しっぱなしにすることでも、パンニングツールが利用できます。
* ビューを最初の状態に戻すには、「ビューをリセット」編集コマンドを使用します。


== ちょっと進んだ使い方

=== レイヤー
レイヤー機能を使うことで、立体的にレールが重なりあう複雑なレイアウトを作図することができます。

image::layers.png[]

1. レイヤーの追加
** 新しいレイヤーを追加します。
2. レイヤーの可視性
** レイヤーの可視性を切り替えます。クリックすると、可視、半透明、不可視の３つの状態をトグルします。
3. レイヤー名
** レイヤー名をクリックすることで、アクティブレイヤー（編集中のレイヤー）を切り替えます。
4. レイヤーの設定
** レイヤー名、レールの色を変更することができます。


=== カスタムレール
==== カスタムストレートレール
カスタムストレートレールを追加する手順は以下の通りです。

. ストレートレールパレット右上の + ボタンをクリックします。
. レールの名前、長さ、単線or複線を入力してOKをクリックします。

==== カスタムカーブレール
カスタムカーブレールを追加する手順は以下の通りです。

. カーブレールパレット右上の + ボタンをクリックします。
. レールの名前、半径、角度、単線or複線を入力してOKをクリックします。

